/*
 * jQuery MiniColors: A tiny color picker built on jQuery
 *
 * Copyright Cory LaViska for A Beautiful Site, LLC. (http://www.abeautifulsite.net/)
 *
 * Licensed under the MIT license: http://opensource.org/licenses/MIT
 * modified by jujiyangasli@gmail.com
 *
 */
jQuery&&function(b){function J(a,c){var d=b('<div class="minicolors" />'),n=b.minicolors.defaults;a.data("minicolors-initialized")||(c=b.extend(!0,{},n,c),d.addClass("minicolors-theme-"+c.theme).toggleClass("minicolors-with-opacity",c.opacity),void 0!==c.position&&b.each(c.position.split(" "),function(){d.addClass("minicolors-position-"+this)}),a.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",c).prop("size",7).wrap(d).after('<div class="minicolors-panel minicolors-slider-'+
c.control+'"><div class="minicolors-slider"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider"><div class="minicolors-picker"></div></div><div class="minicolors-grid"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),c.inline||(a.after('<span class="minicolors-swatch"><span class="minicolors-swatch-color"></span></span>'),a.next(".minicolors-swatch").on("click",function(c){c.preventDefault();a.focus()})),a.parent().find(".minicolors-panel").on("selectstart",
function(){return!1}).end(),c.inline&&a.parent().addClass("minicolors-inline"),x(a,!1),a.data("minicolors-initialized",!0))}function C(a){var c=a.parent();a.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input");c.before(a).remove()}function A(a){var c=a.parent(),d=c.find(".minicolors-panel"),n=a.data("minicolors-settings");!a.data("minicolors-initialized")||a.prop("disabled")||c.hasClass("minicolors-inline")||c.hasClass("minicolors-focus")||
(y(),c.addClass("minicolors-focus"),d.stop(!0,!0).fadeIn(n.showSpeed,function(){n.show&&n.show.call(a.get(0))}))}function y(){b(".minicolors-focus").each(function(){var a=b(this),c=a.find(".minicolors-input"),d=a.find(".minicolors-panel"),n=c.data("minicolors-settings");d.fadeOut(n.hideSpeed,function(){n.hide&&n.hide.call(c.get(0));a.removeClass("minicolors-focus")})})}function D(a,c,d){var n=a.parents(".minicolors").find(".minicolors-input"),b=n.data("minicolors-settings"),e=a.find("[class$=-picker]"),
f=a.offset().left,h=a.offset().top,g=Math.round(c.pageX-f),l=Math.round(c.pageY-h);d=d?b.animationSpeed:0;c.originalEvent.changedTouches&&(g=c.originalEvent.changedTouches[0].pageX-f,l=c.originalEvent.changedTouches[0].pageY-h);0>g&&(g=0);0>l&&(l=0);g>a.width()&&(g=a.width());l>a.height()&&(l=a.height());a.parent().is(".minicolors-slider-wheel")&&e.parent().is(".minicolors-grid")&&(f=75-g,h=75-l,c=Math.sqrt(f*f+h*h),f=Math.atan2(h,f),0>f&&(f+=2*Math.PI),75<c&&(c=75,g=75-75*Math.cos(f),l=75-75*Math.sin(f)),
g=Math.round(g),l=Math.round(l));a.is(".minicolors-grid")?e.stop(!0).animate({top:l+"px",left:g+"px"},d,b.animationEasing,function(){E(n,a)}):e.stop(!0).animate({top:l+"px"},d,b.animationEasing,function(){E(n,a)})}function E(a,c){function d(a,c){var d,b;if(!a.length||!c)return null;d=a.offset().left;b=a.offset().top;return{x:d-c.offset().left+a.outerWidth()/2,y:b-c.offset().top+a.outerHeight()/2}}var b,k,e,f,p,g;f=a.attr("data-hex");var l=a.attr("data-opacity");p=a.parent();var v=a.data("minicolors-settings"),
w=p.find(".minicolors-swatch");g=p.find(".minicolors-grid");var u=p.find(".minicolors-slider"),q=p.find(".minicolors-opacity-slider");e=g.find("[class$=-picker]");var m=u.find("[class$=-picker]"),r=q.find("[class$=-picker]");e=d(e,g);m=d(m,u);r=d(r,q);if(c.is(".minicolors-grid, .minicolors-slider"))switch(v.control){case "wheel":f=g.width()/2-e.x;p=g.height()/2-e.y;g=Math.sqrt(f*f+p*p);f=Math.atan2(p,f);0>f&&(f+=2*Math.PI);75<g&&(g=75,e.x=69-75*Math.cos(f),e.y=69-75*Math.sin(f));k=h(g/.75,0,100);
b=h(180*f/Math.PI,0,360);e=h(100-Math.floor(m.y*(100/u.height())),0,100);f=t({h:b,s:k,b:e});u.css("backgroundColor",t({h:b,s:k,b:100}));break;case "saturation":b=h(parseInt(e.x*(360/g.width()),10),0,360);k=h(100-Math.floor(m.y*(100/u.height())),0,100);e=h(100-Math.floor(e.y*(100/g.height())),0,100);f=t({h:b,s:k,b:e});u.css("backgroundColor",t({h:b,s:100,b:e}));p.find(".minicolors-grid-inner").css("opacity",k/100);break;case "brightness":b=h(parseInt(e.x*(360/g.width()),10),0,360);k=h(100-Math.floor(e.y*
(100/g.height())),0,100);e=h(100-Math.floor(m.y*(100/u.height())),0,100);f=t({h:b,s:k,b:e});u.css("backgroundColor",t({h:b,s:k,b:100}));p.find(".minicolors-grid-inner").css("opacity",1-e/100);break;default:b=h(360-parseInt(m.y*(360/u.height()),10),0,360),k=h(Math.floor(e.x*(100/g.width())),0,100),e=h(100-Math.floor(e.y*(100/g.height())),0,100),f=t({h:b,s:k,b:e}),g.css("backgroundColor",t({h:b,s:100,b:100}))}c.is(".minicolors-opacity-slider")&&(l=v.opacity?parseFloat(1-r.y/q.height()).toFixed(2):1,
v.opacity&&a.attr("data-opacity",l));w.find("SPAN").css({backgroundColor:f,opacity:l});a.attr("data-hex",f);1>l?a.val(F(a,!0)):a.val(f);G(a,f,l)}function x(a,c){var d,b,k,e,f,p;f=a.parent();k=a.data("minicolors-settings");p=f.find(".minicolors-swatch");var g=f.find(".minicolors-grid"),l=f.find(".minicolors-slider");e=f.find(".minicolors-opacity-slider");var v=g.find("[class$=-picker]"),w=l.find("[class$=-picker]"),u=e.find("[class$=-picker]");d=a.val();/^rgb/.test(d)&&(d.replace(/\s+/g,"").replace(/^rgb(a|)\(/,
"").replace(/\)$/,"").split(","),d={r:1*val[0],g:1*val[0],b:1*val[0]},d=H(d),a.data("data-hex",d));(d=I(z(d,!0),k.letterCase))||(d=I(z(k.defaultValue,!0),k.letterCase));var q=B(d),m=0,r=0,s=0,r=Math.min(q.r,q.g,q.b),s=Math.max(q.r,q.g,q.b),m=s-r,r=0!==s?255*m/s:0,m=0!==r?q.r===s?(q.g-q.b)/m:q.g===s?2+(q.b-q.r)/m:4+(q.r-q.g)/m:-1,m=60*m;0>m&&(m+=360);r*=100/255;s*=100/255;0===r&&(m=360);k.opacity&&(b=""===a.attr("data-opacity")?1:h(parseFloat(a.attr("data-opacity")).toFixed(2),0,1),isNaN(b)&&(b=1),
a.attr("data-opacity",b),p.find("SPAN").css("opacity",b),e=h(e.height()-e.height()*b,0,e.height()),u.css("top",e+"px"));p.find("SPAN").css("backgroundColor",d);switch(k.control){case "wheel":f=h(Math.ceil(.75*r),0,g.height()/2);p=m*Math.PI/180;k=h(75-Math.cos(p)*f,0,g.width());e=h(75-Math.sin(p)*f,0,g.height());v.css({top:e+"px",left:k+"px"});e=150-s/(100/g.height());""===d&&(e=0);w.css("top",e+"px");l.css("backgroundColor",t({h:m,s:r,b:100}));break;case "saturation":k=h(5*m/12,0,150);e=h(g.height()-
Math.ceil(s/(100/g.height())),0,g.height());v.css({top:e+"px",left:k+"px"});e=h(l.height()-r*(l.height()/100),0,l.height());w.css("top",e+"px");l.css("backgroundColor",t({h:m,s:100,b:s}));f.find(".minicolors-grid-inner").css("opacity",r/100);break;case "brightness":k=h(5*m/12,0,150);e=h(g.height()-Math.ceil(r/(100/g.height())),0,g.height());v.css({top:e+"px",left:k+"px"});e=h(l.height()-s*(l.height()/100),0,l.height());w.css("top",e+"px");l.css("backgroundColor",t({h:m,s:r,b:100}));f.find(".minicolors-grid-inner").css("opacity",
1-s/100);break;default:k=h(Math.ceil(r/(100/g.width())),0,g.width()),e=h(g.height()-Math.ceil(s/(100/g.height())),0,g.height()),v.css({top:e+"px",left:k+"px"}),e=h(l.height()-m/(360/l.height()),0,l.height()),w.css("top",e+"px"),g.css("backgroundColor",t({h:m,s:100,b:100}))}a.data("minicolors-initialized")&&G(a,d,b)}function G(a,c,b){var n=a.data("minicolors-settings"),k=a.data("minicolors-lastChange");k&&k.hex===c&&k.opacity===b||(a.data("minicolors-lastChange",{hex:c,opacity:b}),n.change&&(n.changeDelay?
(clearTimeout(a.data("minicolors-changeTimeout")),a.data("minicolors-changeTimeout",setTimeout(function(){n.change.call(a.get(0),c,b)},n.changeDelay))):n.change.call(a.get(0),c,b)),a.trigger("change").trigger("input"))}function K(a){var c=z(b(a).attr("data-hex"),!0),c=B(c);a=b(a).attr("data-opacity");if(!c)return null;void 0!==a&&b.extend(c,{a:parseFloat(a)});return c}function F(a,c){var d=z(b(a).attr("data-hex"),!0),d=B(d),n=b(a).attr("data-opacity");if(!d)return null;void 0===n&&(n=1);return c?
"rgba("+d.r+", "+d.g+", "+d.b+", "+parseFloat(n)+")":"rgb("+d.r+", "+d.g+", "+d.b+")"}function I(a,b){return"uppercase"===b?a.toUpperCase():a.toLowerCase()}function z(a,b){a=a.replace(/[^A-F0-9]/ig,"");if(3!==a.length&&6!==a.length)return"";3===a.length&&b&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);return"#"+a}function h(a,b,d){a<b&&(a=b);a>d&&(a=d);return a}function H(a){var c=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];b.each(c,function(a,b){1===b.length&&(c[a]="0"+b)});return"#"+c.join("")}function t(a){var b=
H,d,h,k;d=Math.round(a.h);var e=Math.round(255*a.s/100);a=Math.round(255*a.b/100);if(0===e)d=h=k=a;else{var e=(255-e)*a/255,f=d%60*(a-e)/60;360===d&&(d=0);60>d?(d=a,k=e,h=e+f):120>d?(h=a,k=e,d=a-f):180>d?(h=a,d=e,k=e+f):240>d?(k=a,d=e,h=a-f):300>d?(k=a,h=e,d=e+f):360>d?(d=a,h=e,k=a-f):k=h=d=0}a={r:Math.round(d),g:Math.round(h),b:Math.round(k)};return b(a)}function B(a){a=parseInt(-1<a.indexOf("#")?a.substring(1):a,16);return{r:a>>16,g:(a&65280)>>8,b:a&255}}b.minicolors={defaults:{animationSpeed:50,
animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",hide:null,hideSpeed:100,inline:!1,letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default"}};b.extend(b.fn,{minicolors:function(a,c){switch(a){case "destroy":return b(this).each(function(){C(b(this))}),b(this);case "hide":return y(),b(this);case "opacity":if(void 0===c)return b(this).attr("data-opacity");b(this).each(function(){x(b(this).attr("data-opacity",c))});return b(this);
case "rgbObject":return K(b(this),"rgbaObject"===a);case "rgbString":case "rgbaString":return F(b(this),"rgbaString"===a);case "settings":if(void 0===c)return b(this).data("minicolors-settings");b(this).each(function(){var a=b(this).data("minicolors-settings")||{};C(b(this));b(this).minicolors(b.extend(!0,a,c))});return b(this);case "show":return A(b(this).eq(0)),b(this);case "value":if(void 0===c)return b(this).val();b(this).each(function(){x(b(this).val(c))});return b(this);default:return"create"!==
a&&(c=a),b(this).each(function(){J(b(this),c)}),b(this)}}});b(document).on("mousedown.minicolors touchstart.minicolors",function(a){b(a.target).parents().add(a.target).hasClass("minicolors")||y()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(a){var c=b(this);a.preventDefault();b(document).data("minicolors-target",c);D(c,a,!0)}).on("mousemove.minicolors touchmove.minicolors",function(a){var c=b(document).data("minicolors-target");
c&&D(c,a)}).on("mouseup.minicolors touchend.minicolors",function(){b(this).removeData("minicolors-target")}).on("mousedown.minicolors touchstart.minicolors",".minicolors-swatch",function(a){var c=b(this).parent().find(".minicolors-input");a.preventDefault();A(c)}).on("focus.minicolors",".minicolors-input",function(){var a=b(this);a.data("minicolors-initialized")&&A(a)}).on("blur.minicolors",".minicolors-input",function(){var a=b(this);a.data("minicolors-settings");a.data("minicolors-initialized")}).on("keydown.minicolors",
".minicolors-input",function(a){var c=b(this);if(c.data("minicolors-initialized"))switch(a.keyCode){case 9:y();break;case 13:case 27:y(),c.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var a=b(this);a.data("minicolors-initialized")&&x(a,!0)}).on("paste.minicolors",".minicolors-input",function(){var a=b(this);a.data("minicolors-initialized")&&setTimeout(function(){x(a,!0)},1)})}(jQuery);